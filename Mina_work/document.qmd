---
title: "Lifelong Learning"
author: mina-cheese
format: pdf
---

```{r setup, include=F}
knitr::opts_chunk$set(echo = FALSE, message=FALSE, warning=FALSE, fig.height = 10)
options(scipen = 7)
library(tidyverse)
library(stargazer)
library(corrplot)
library(patchwork)
library(tigris)
library(sf)
library(factoextra)
```

I guess we are calling these milestone projects? Well in any case I'll be doing what Binh did but for the lifelong learning dataset. 

```{r}
# getting the data into readable format
colnames <- names(read.csv("Lifelong-Learning-Zip-Codes.csv",nrows=0))

# data wrangling blah blah blah
data <- read.csv("Lifelong-Learning-Zip-Codes.csv", skip=2, header=FALSE)
names(data) <- colnames
data <- data |> select(-Layer, -Name) # removing redundant columns

# Wrangled dataframes for other visualizations
dataCorr <- data |> select(-FVDEWVAR_2023.2024, -FVDEYLCV_2024.2025) |> na.omit()
dataCorr1 <- data |> na.omit()

dataSumm <- data |> select(-GEOID)
```

## Legend

The variable names are terrible so I'll describe them here. I'll give the letters while the corresponding numbers following them are the relevant years.

- `EDA`: 9th grade education rate (%)
- `EDB`: high school graduation rate (%)
- `EDC`: any higher education rate (%)
- `EDE`: college graduation rate (%)
- `EDG`: preschool enrollment for ages 3-4 (%)
- `FWDEWVAR`: public school suspensions K-12
- `FVDEYLCV`: public school enrollment K-12

It is worth noting that there is a significant number of `NA` entries in the last two variables.

## Exploratory Plots and Variables

### Correlation n Shit

Here is the correlation plot with the final two variables omitted. 

```{r}
# Without the last two variables
plt = cor(dataCorr)
corrplot(plt, method='color', order = 'AOE', type='upper', addCoef.col = 'black')
```

Here is the correlation plot inlcuding the last two variables. Due to the large number of `NA` entries, the number of rows has been shaved down from 52 to 25.

```{r}
# With the last two variables
plt1 = cor(dataCorr1)
corrplot(plt1, method='color', order = 'AOE', type='upper', addCoef.col = 'black')
```

data interpretation or something??

### PCA?? omg!!!

```{r}
# Use R's built in PCA function to perform PCA on the dataset
pca_result <- prcomp(dataCorr, scale. = TRUE)
fviz_eig(pca_result) # Visualize the number of dominating eigenvalues
```

There are probably some other functions I can use but idgaf rn

### Histograms

```{r}
vars <- c("EDA_2019.2023", "EDB_2019.2023", "EDC_2019.2023" ,"EDE_2019.2023", "EDG.X341_2019.2023", "FVDEWVAR_2023.2024", "FVDEYLCV_2024.2025")

plots <- map(vars, ~ ggplot(data, aes_string(.x))) +
  geom_histogram()
plots
```



